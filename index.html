<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Password Generator</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
    <style>
        .copy-clipboard svg{
            cursor: pointer;
        }
        .options{
            padding: 10px 0;
            margin-bottom: 0;
            position: relative;
        }
        .no-outline{
            outline: none;
            border: 1px solid transparent;
            padding:2px 0 2px 6px;
        }
        .no-outline:focus{
            border: 1px solid #22C9B6;
        }
        .includedPopups{
            display: block;
            position: absolute;
            bottom: 0;
            border: 1px solid #000;
            padding: 5px;
            display: none;
        }
        .animate .gradient-animation{
            animation: clockwise 2s ease-out infinite;
        }

        @keyframes clockwise {
            0%{
                background-size: 100% 100%;

            }
            50%{
                background-size: 600% 200%;
            }
            100%{
                background-size: 100% 100%;
            }
        }


    </style>
  </head>
  <body class="" >
    <div class="d-grid justify-content-center align-content-center gradient-animation" style="height:100vh;background:linear-gradient(-45deg, #ee7752, #e73c7e, #23a6d5, #23d5ab); ">
        <p style="font-size: 22px;font-weight:600;">Password Generator</p>
        <div class="shadow-lg p-5 gradient-animation-reverse" style="width:500px; background-color:#ffffff82;">
            <div class="mb-3 d-flex align-items-center"><input type="text" name="" id="passwordGen" class="rounded w-100 " style="max-width:400px;padding: 8px 12px;border: 2px solid #E84478; outline:none;">
                <span style="padding:5px; " class="copy-clipboard" data-bs-toggle="tooltip" data-bs-placement="top" data-bs-title="Copy Password">
                    <svg xmlns="http://www.w3.org/2000/svg" width="100" style="max-width:25px;" fill="currentColor" class="bi bi-clipboard-heart" viewBox="0 0 16 16">
                        <path fill-rule="evenodd" d="M5 1.5A1.5 1.5 0 0 1 6.5 0h3A1.5 1.5 0 0 1 11 1.5v1A1.5 1.5 0 0 1 9.5 4h-3A1.5 1.5 0 0 1 5 2.5v-1Zm5 0a.5.5 0 0 0-.5-.5h-3a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h3a.5.5 0 0 0 .5-.5v-1Z"/>
                        <path d="M3 1.5h1v1H3a1 1 0 0 0-1 1V14a1 1 0 0 0 1 1h10a1 1 0 0 0 1-1V3.5a1 1 0 0 0-1-1h-1v-1h1a2 2 0 0 1 2 2V14a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V3.5a2 2 0 0 1 2-2Z"/>
                        <path class="heart" d="M8 6.982C9.664 5.309 13.825 8.236 8 12 2.175 8.236 6.336 5.31 8 6.982Z"/>
                      </svg>
                </span>

            </div>
            <div class="customize">
                <p class="options "><span>Length : </span> <input type="number" name="" id="passwordLength" min="8" max="50" value="8" class="no-outline rounded"></p>
                <p class="options "><span>Uppercase (A-Z) : </span><input type="checkbox" name="" id="uppercase" checked></p>
                <p class="options "><span>Lowercase (a-z) : </span><input type="checkbox" name="" id="lowercase" checked></p>
                <p class="options "><span>Number (0-9) : </span><input type="checkbox" name="" id="numbers" checked></p>
                <p class="options " ><span data-bs-toggle="tooltip" data-bs-placement="top" data-bs-title="!#$%&*+/=?@\^~">Special Chars : </span><input type="checkbox" name="" id="specialchars" checked></p>
                <p class="options d-flex"><span>Escape&nbsp;char&nbsp;:&nbsp;</span> <textarea id="excludeChar" name="" rows="2" cols="15" style="font-size: 14px;line-height:1.1;outline:none;border:none;resize: both;" maxlength="20"></textarea></p>
            </div>
            <p class="text-center mt-5 mb-0">
                <button type="button" class="btn btn-dark generate">Generate</button></p>
        </div>
    </div>





    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js" integrity="sha384-oBqDVmMz9ATKxIep9tiCxS/Z9fNfEXiDAYTujMAeBAsjFuCZSmKbSSUnQlmh/jp3" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.min.js" integrity="sha384-cuYeSxntonz0PPNlHhBs68uyIAVpIIOZZ5JqeqvYYIcEL727kskC66kF92t6Xl2V" crossorigin="anonymous"></script>



   <script>
    var pCounter = 0;
    const passGenerated = document.querySelector('#passwordGen');
    const generateKey = document.querySelector('.generate');
    const passLen = document.querySelector('#passwordLength');
    const uppercase = document.querySelector('#uppercase');
    const lowercase = document.querySelector('#lowercase');
    const numbers = document.querySelector('#numbers');
    const excludedchars = document.querySelector('#excludeChar');
    const specialchars = document.querySelector('#specialchars');
    const bodyRef = document.querySelector('body');
    const clipboard = document.querySelector('.copy-clipboard svg');



    //string assignment
    let availableString = "";
    function setupString(){
        availableString = "";
        if(uppercase.checked){
            availableString += 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
        }
        if(specialchars.checked) {
            availableString += '!#$%&*+/=?@\^~';
        }
        if(numbers.checked){
            availableString += '0123456789';
        }
        if(lowercase.checked){
            availableString +='abcdefghijklmnopqrstuvwxyz' ;
        }


        if(excludedchars.value.length>0){
            const reg = /[\n\s]+/g;
            let str = excludedchars.value.replaceAll(reg,'');
            availableString = availableString.replaceAll(new RegExp(`[${str}]`,"g"),'');
        }
    }




    generateKey.addEventListener('click',function (e){
        setupString();
        bodyRef.classList.toggle('animate');
        setTimeout(generatePassword,50);

    })

    function retunChar(str){
        let rn = Math.floor(Math.random()*str.length);
        if(rn >=str.length){
            rn = Math.floor(Math.random()*(str.length -1));
        }
        return str[rn];
    }

    function generatePassword(){
        if(pCounter++<10){
        let passLength = passLen.value;
        passGenerated.value = '';
        if(availableString.length<passLength){
            alert('Select some more type of char or chars available length is less then password length required');
            retun;
        }
        for(let i =0;i<passLength;i++){
            passGenerated.value += retunChar(availableString);
        }
        setTimeout(generatePassword,50);
        }else{
            pCounter=0;
            bodyRef.classList.toggle('animate');
        }

    }

    document.addEventListener("DOMContentLoaded", function(event) {
        generateKey.click();
    });
    const tooltipTriggerList = document.querySelectorAll('[data-bs-toggle="tooltip"]')
    const tooltipList = [...tooltipTriggerList].map(tooltipTriggerEl => new bootstrap.Tooltip(tooltipTriggerEl))


    //copy to clipborad
    clipboard.addEventListener("click",function (event){
        clipboard.querySelector('.heart').style.fill = '#fff';
        setTimeout(function(){
            clipboard.querySelector('.heart').style.fill = 'unset';
        },2000);
        navigator.clipboard.writeText(passGenerated.value);

    });


   </script>






  </body>
</html>
